<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【李炎恢】【Mock.js / Axios.js / Json / Ajax】【十天精品课堂系列】 | 学而时习之</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/img/qiyu.jpg">
    <meta name="description" content="个人学习博客">
    <link rel="preload" href="/assets/css/0.styles.764fb01f.css" as="style"><link rel="preload" href="/assets/js/app.b56b5bda.js" as="script"><link rel="preload" href="/assets/js/2.22c5cd06.js" as="script"><link rel="preload" href="/assets/js/55.ba664490.js" as="script"><link rel="prefetch" href="/assets/js/10.1e76d9ca.js"><link rel="prefetch" href="/assets/js/11.6af0948b.js"><link rel="prefetch" href="/assets/js/12.9041d241.js"><link rel="prefetch" href="/assets/js/13.411f20f5.js"><link rel="prefetch" href="/assets/js/14.1f7eacc7.js"><link rel="prefetch" href="/assets/js/15.54c1be8f.js"><link rel="prefetch" href="/assets/js/16.b5e1607d.js"><link rel="prefetch" href="/assets/js/17.d771ed77.js"><link rel="prefetch" href="/assets/js/18.663bb4e5.js"><link rel="prefetch" href="/assets/js/19.0daa23af.js"><link rel="prefetch" href="/assets/js/20.195502ab.js"><link rel="prefetch" href="/assets/js/21.d050dedc.js"><link rel="prefetch" href="/assets/js/22.9f54f9ed.js"><link rel="prefetch" href="/assets/js/23.cb94193b.js"><link rel="prefetch" href="/assets/js/24.19ba60dd.js"><link rel="prefetch" href="/assets/js/25.98224f22.js"><link rel="prefetch" href="/assets/js/26.72e5915c.js"><link rel="prefetch" href="/assets/js/27.dd89f3cc.js"><link rel="prefetch" href="/assets/js/28.df484e57.js"><link rel="prefetch" href="/assets/js/29.18b6b3c1.js"><link rel="prefetch" href="/assets/js/3.98d5a830.js"><link rel="prefetch" href="/assets/js/30.d8414a40.js"><link rel="prefetch" href="/assets/js/31.c3f95a3d.js"><link rel="prefetch" href="/assets/js/32.31be87b3.js"><link rel="prefetch" href="/assets/js/33.994d131f.js"><link rel="prefetch" href="/assets/js/34.69f69c05.js"><link rel="prefetch" href="/assets/js/35.76bd139c.js"><link rel="prefetch" href="/assets/js/36.36155d32.js"><link rel="prefetch" href="/assets/js/37.beefeb05.js"><link rel="prefetch" href="/assets/js/38.a5fc69c6.js"><link rel="prefetch" href="/assets/js/39.936ac144.js"><link rel="prefetch" href="/assets/js/4.2e91fc91.js"><link rel="prefetch" href="/assets/js/40.cd7ef778.js"><link rel="prefetch" href="/assets/js/41.bb29d1d1.js"><link rel="prefetch" href="/assets/js/42.47ac0fc8.js"><link rel="prefetch" href="/assets/js/43.c0eafb49.js"><link rel="prefetch" href="/assets/js/44.7058c910.js"><link rel="prefetch" href="/assets/js/45.4a8fa05b.js"><link rel="prefetch" href="/assets/js/46.21bef9a3.js"><link rel="prefetch" href="/assets/js/47.e86d3cac.js"><link rel="prefetch" href="/assets/js/48.8d2ee7b1.js"><link rel="prefetch" href="/assets/js/49.a48d5964.js"><link rel="prefetch" href="/assets/js/5.48f17c75.js"><link rel="prefetch" href="/assets/js/50.1ce7b8e9.js"><link rel="prefetch" href="/assets/js/51.09664493.js"><link rel="prefetch" href="/assets/js/52.88f1f093.js"><link rel="prefetch" href="/assets/js/53.2ea7c2de.js"><link rel="prefetch" href="/assets/js/54.e15dd94e.js"><link rel="prefetch" href="/assets/js/56.e0f891a7.js"><link rel="prefetch" href="/assets/js/57.57f7a97b.js"><link rel="prefetch" href="/assets/js/58.7429f7a3.js"><link rel="prefetch" href="/assets/js/59.c1094ee7.js"><link rel="prefetch" href="/assets/js/6.a1c52342.js"><link rel="prefetch" href="/assets/js/60.21c0558a.js"><link rel="prefetch" href="/assets/js/61.944d1d2b.js"><link rel="prefetch" href="/assets/js/62.8e8f7252.js"><link rel="prefetch" href="/assets/js/63.8d45f05c.js"><link rel="prefetch" href="/assets/js/7.09468979.js"><link rel="prefetch" href="/assets/js/8.eac43d81.js"><link rel="prefetch" href="/assets/js/9.992af581.js">
    <link rel="stylesheet" href="/assets/css/0.styles.764fb01f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学而时习之</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/" class="nav-link">
  博客相关知识
</a></li><li class="dropdown-item"><!----> <a href="/javaBasics/" class="nav-link">
  JavaSE基础知识
</a></li><li class="dropdown-item"><!----> <a href="/JavaFramework/" class="nav-link">
  Java框架知识
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  技术书籍
</a></li><li class="dropdown-item"><!----> <a href="/qianduan/" class="nav-link router-link-active">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/SQL/" class="nav-link">
  数据库知识
</a></li><li class="dropdown-item"><!----> <a href="/ProjectPractice/" class="nav-link">
  项目实战
</a></li><li class="dropdown-item"><!----> <a href="/ProjectEx/" class="nav-link">
  工作项目积累
</a></li><li class="dropdown-item"><!----> <a href="/faultNote/" class="nav-link">
  记错本
</a></li><li class="dropdown-item"><!----> <a href="/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具网站" class="dropdown-title"><span class="title">工具网站</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具网站" class="mobile-dropdown-title"><span class="title">工具网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://postimages.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postimages图床
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/" class="nav-link">
  博客相关知识
</a></li><li class="dropdown-item"><!----> <a href="/javaBasics/" class="nav-link">
  JavaSE基础知识
</a></li><li class="dropdown-item"><!----> <a href="/JavaFramework/" class="nav-link">
  Java框架知识
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  技术书籍
</a></li><li class="dropdown-item"><!----> <a href="/qianduan/" class="nav-link router-link-active">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/SQL/" class="nav-link">
  数据库知识
</a></li><li class="dropdown-item"><!----> <a href="/ProjectPractice/" class="nav-link">
  项目实战
</a></li><li class="dropdown-item"><!----> <a href="/ProjectEx/" class="nav-link">
  工作项目积累
</a></li><li class="dropdown-item"><!----> <a href="/faultNote/" class="nav-link">
  记错本
</a></li><li class="dropdown-item"><!----> <a href="/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具网站" class="dropdown-title"><span class="title">工具网站</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具网站" class="mobile-dropdown-title"><span class="title">工具网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://postimages.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postimages图床
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jquery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>李炎恢</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/qianduan/lyh/axios&amp;mock.html" aria-current="page" class="active sidebar-link">axios&amp;mock学习笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#【李炎恢】【mock-js-axios-js-json-ajax】【十天精品课堂系列】" class="sidebar-link">【李炎恢】【Mock.js / Axios.js / Json / Ajax】【十天精品课堂系列】</a></li><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#mock-js" class="sidebar-link">Mock.js</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#mock-js入门和安装" class="sidebar-link">Mock.js入门和安装</a></li><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#mock-js语法规范" class="sidebar-link">Mock.js语法规范</a></li><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#mock-js随机占位符" class="sidebar-link">Mock.js随机占位符</a></li></ul></li><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#axios" class="sidebar-link">axios</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#axios入门和安装" class="sidebar-link">axios入门和安装</a></li><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#axios配置和并发" class="sidebar-link">axios配置和并发</a></li><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#axios实例化和拦截" class="sidebar-link">axios实例化和拦截</a></li><li class="sidebar-sub-header"><a href="/qianduan/lyh/axios&amp;mock.html#mock拦截axios请求" class="sidebar-link">Mock拦截axios请求</a></li></ul></li></ul></li><li><a href="/qianduan/lyh/李炎恢vue工具篇.html" class="sidebar-link">vue工具篇教程学习笔记</a></li><li><a href="/qianduan/lyh/李炎恢vue核心篇.html" class="sidebar-link">vue核心篇教程学习笔记</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="【李炎恢】【mock-js-axios-js-json-ajax】【十天精品课堂系列】"><a href="#【李炎恢】【mock-js-axios-js-json-ajax】【十天精品课堂系列】" class="header-anchor">#</a> 【李炎恢】【Mock.js / Axios.js / Json / Ajax】【十天精品课堂系列】</h2> <h2 id="mock-js"><a href="#mock-js" class="header-anchor">#</a> Mock.js</h2> <h3 id="mock-js入门和安装"><a href="#mock-js入门和安装" class="header-anchor">#</a> Mock.js入门和安装</h3> <ul><li>模拟JSON数据的前端技术</li> <li>对于前后端分离的项目,如果后端接口还没写好,就可以使用mock来拿到一些临时数据用以提前完善前端部分.</li> <li>安装命令,进入项目根目录打开命令行,输入<code>npm install mockjs</code>.</li></ul> <h5 id="官方示例"><a href="#官方示例" class="header-anchor">#</a> 官方示例</h5> <ul><li><p>node运行</p> <ul><li>首先创建01.js文件</li> <li>require(属于node语法)引入<code>mockjs</code>,使用mock方法,以及mock的语法生成一些数据.</li> <li>然后使用JSON.stringify把数据转为JSON格式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Mock <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mockjs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 属性 list 的值是一个数组，其中含有 1 到 10 个元素</span>
    <span class="token string">&quot;list|1-10&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token string">&quot;id|+1&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token comment">// 属性 id 是一个自增数，起始值为 1，每次增 1</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>浏览器运行</p> <ul><li><p>创建html文件</p></li> <li><p>在其中使用script标签引入特定路径的js文件就可以.<code>http://mockjs.com/dist/mock.js</code></p></li> <li><p>然后在html中的script标签中写我们的js代码.</p></li> <li><p>右键运行即可.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://mockjs.com/dist/mock.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> data <span class="token operator">=</span> Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 属性 list 的值是一个数组，其中含有 1 到 10 个元素</span>
        <span class="token string">&quot;list|1-10&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token string">&quot;id|+1&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token comment">// 属性 id 是一个自增数，起始值为 1，每次增 1</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(data);</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></li></ul></li></ul> <h3 id="mock-js语法规范"><a href="#mock-js语法规范" class="header-anchor">#</a> Mock.js语法规范</h3> <ul><li><p>语法有两部分构成:数据模板定义和数据占位定义</p></li> <li><p>数据模板规范:</p> <ul><li>属性名</li> <li>生成规则</li> <li>属性值</li></ul></li> <li><p><code>'属性名|生成规则':属性值</code>,也就是<code>//'name'|rule':value</code></p></li> <li><p><strong>字符串,数值</strong></p> <ul><li>min-max
<ul><li>生成 min ~ max 之间的字符串</li> <li>'list|1-10'</li></ul></li> <li>count
<ul><li>生成 count 个字符串</li> <li>'list|5'</li></ul></li> <li>min-max.dmin-dmax
<ul><li>生成 min ~ max 之间的浮点数， 小数点位数在 dmin ~ dmax 之间</li> <li>'id|1-10.1-3' : 1</li></ul></li> <li>count.dcount
<ul><li>生成 count 个字符串， 小数点位数为 dcount</li> <li>'id|8.2' : 1</li></ul></li> <li>min-max.dcount //同上</li> <li>count.dmin-dmax //同上</li> <li>+step
<ul><li>每次进行累加一个值</li> <li>'id|+1' : 1</li></ul></li></ul></li> <li><p><strong>布尔值,对象,数组</strong></p> <ul><li>布尔值
<ul><li>生成布尔值，1/2 概率 true</li> <li>'flag|1' : true</li></ul></li> <li>布尔值 min-max
<ul><li>生成布尔值， 概率为 min/(min + max)</li> <li>'flag|1-10' : true</li></ul></li> <li>对象 count
<ul><li>从对象中随机抽取 count 个属性</li> <li>'obj|2' : obj</li></ul></li> <li>对象 min-max
<ul><li>从对象中随机抽取 min-max 属性</li> <li>'obj|1-3' : obj</li></ul></li> <li>数组 1
<ul><li>获取 1 次数组</li> <li>'arr|1' : arr</li></ul></li> <li>数组 count
<ul><li>重复 count 次组成新数组</li> <li>'arr|2' : arr</li></ul></li> <li>数组+1
<ul><li>累加</li> <li>'arr|+1' : arr</li></ul></li> <li>数组 min-max
<ul><li>重复 min-max 次组成新数组</li> <li>'arr|1-2' : arr</li></ul></li></ul></li> <li><p>数据定义的占位符@，比较好理解，占领属性值的位置</p> <ul><li>@cname:获取随机中文名</li> <li>@city:获取中文城市</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Mock <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mockjs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">:</span> <span class="token string">&quot;埼玉&quot;</span><span class="token punctuation">,</span>
    age <span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    gender <span class="token operator">:</span> <span class="token string">&quot;男&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 属性 list 的值是一个数组，其中含有 1 到 10 个元素</span>
    <span class="token string">&quot;list|1-10&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token comment">//&quot;id|+1&quot; : 1// 属性 id 是一个自增数，起始值为 1，每次增 1</span>
        <span class="token comment">//&quot;id|1-10.1-3&quot; : 1 //生成小数点前是1-10,小数点后是1-3位的数字</span>
        <span class="token comment">//&quot;id|8.2&quot; : 1 //小数点前为8,后为两位的数字</span>
        <span class="token comment">//&quot;id|3&quot; : 1</span>
        <span class="token comment">//&quot;flag|1&quot; : true //二分之一的概率为true</span>
        <span class="token comment">//&quot;obj|2&quot; : people//随机从对象中拿出两个属性</span>
        <span class="token comment">//&quot;obj|1-3&quot; : people,//随机从对象中拿出1-3个属性</span>
        <span class="token comment">//&quot;arr|1&quot; : arr //获取数组中的一个元素</span>
        <span class="token comment">//&quot;arr|2&quot; : arr //将同一个数组拿出两次合为一个数组</span>
        <span class="token comment">//&quot;arr|+1&quot; : arr</span>
        <span class="token comment">//&quot;arr|1-2&quot; : arr//如果是1就拿出一个数组,是2就把两个数组合成一个</span>
        <span class="token comment">// &quot;fn&quot; : function () { //支持函数</span>
        <span class="token comment">//     return &quot;fn&quot;</span>
        <span class="token comment">// }</span>
        <span class="token comment">//'reg|1' : /[a-z]/ //支持正则</span>
        <span class="token comment">//name : &quot;@cname&quot;, //cname随机中文名.name随机英文名</span>
        <span class="token comment">//city : &quot;@city&quot;, //随机城市</span>
        <span class="token comment">//full : &quot;@cname -- @city&quot; //可以拼接</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// console.log(data);</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="mock-js随机占位符"><a href="#mock-js随机占位符" class="header-anchor">#</a> Mock.js随机占位符</h3> <ul><li><p>有两种方式可以生成随机中文名</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Mock <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mockjs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span>Random<span class="token punctuation">.</span><span class="token function">cname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@cname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>常用的大概有</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@ctitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@ip&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@image&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 820000199501023117</span>
<span class="token comment">// 严每或</span>
<span class="token comment">// 68.135.165.150</span>
<span class="token comment">// http://dummyimage.com/240x400</span>
<span class="token comment">// rlogin://kms.bo/cvqqmnnb</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@datetime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 8941981901492640</span>
<span class="token comment">// #f279e1</span>
<span class="token comment">// sfG@f</span>
<span class="token comment">// 1982-11-30 23:12:36</span>
</code></pre></div></li> <li><p>当然有些时候我们可能需要一类字符长度一样的字符串,那也可以自己扩展占位符</p> <div class="language-js extra-class"><pre class="language-js"><code>Mock<span class="token punctuation">.</span>Random<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">cflower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pick</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string">&quot;霸王花&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;玫瑰花&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;茉莉花&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;月季花&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;@cflower&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//茉莉花</span>
</code></pre></div></li></ul> <h2 id="axios"><a href="#axios" class="header-anchor">#</a> axios</h2> <h3 id="axios入门和安装"><a href="#axios入门和安装" class="header-anchor">#</a> axios入门和安装</h3> <ul><li><p>安装命令,在项目根目录命令行运行<code>npm install axios</code></p></li> <li><p>用法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;axios&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//promise一样的用法,成功是.then,失败为.catch</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;错误&quot;</span><span class="token operator">+</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//错误Error: Request failed with status code 404</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></li> <li><p>node环境下不存在跨域不跨域,都可以获取到数据,但是浏览器环境则不同.</p></li> <li><p>如果本地没安装axios,使用<code>&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;</code>也可以使用axios</p></li> <li><p>浏览器环境下,跨域则获取不到数据</p></li> <li><p><code>Access to XMLHttpRequest at 'https://cdn.ycku.com/data.json' from origin 'http://localhost:63342' has been blocked by CORS policy: The 'Access-Control-Allow-Origin' header has a value 'https://www.ycku.com' that is not equal to the supplied origin. 错误Error: Network Error</code></p></li> <li><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;错误&quot;</span><span class="token operator">+</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//错误Error: Request failed with status code 404</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></li></ul> <h3 id="axios配置和并发"><a href="#axios配置和并发" class="header-anchor">#</a> axios配置和并发</h3> <ul><li><p>有时候我们异步访问某个url,可能要携带一些参数</p></li> <li><p>如果每次都拼接到url后面,手动写太过麻烦.</p></li> <li><p>所以axios给我们提供了配置携带参数的方法.</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;https://cdn.liyanhui.com/data.json?id=1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第一个'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//手动拼接很麻烦</span>

axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token comment">//配置拼接,在浏览器的network页面的url后面会拼上配置的参数</span>
    params <span class="token operator">:</span> <span class="token punctuation">{</span>
        id <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        status <span class="token operator">:</span> <span class="token number">404</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//完全配置</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url <span class="token operator">:</span><span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
    method <span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
    params <span class="token operator">:</span> <span class="token punctuation">{</span>
        id <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        status <span class="token operator">:</span> <span class="token number">404</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>而且axios的异步是并发的,不是等一个执行完再执行另一个.</p></li> <li><p>所以连续写三个异步,不一定哪个先执行完毕.</p></li> <li><p>使用<code>axios.all()</code>方法就可以按顺序执行异步(其实就是promise).</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">//直接写三个异步,运行顺序无法保障</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url <span class="token operator">:</span><span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
    method <span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
    params <span class="token operator">:</span> <span class="token punctuation">{</span>
        id <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        status <span class="token operator">:</span> <span class="token number">404</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1个&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url <span class="token operator">:</span><span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
    method <span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
    params <span class="token operator">:</span> <span class="token punctuation">{</span>
        id <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        status <span class="token operator">:</span> <span class="token number">404</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;2个&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url <span class="token operator">:</span><span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
    method <span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
    params <span class="token operator">:</span> <span class="token punctuation">{</span>
        id <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        status <span class="token operator">:</span> <span class="token number">404</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;3个&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//使用all方法可以按规定顺序执行异步</span>
axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url <span class="token operator">:</span> <span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
        data <span class="token operator">:</span> <span class="token string">&quot;1.异步&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url <span class="token operator">:</span> <span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
        data <span class="token operator">:</span> <span class="token string">&quot;2.异步&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url <span class="token operator">:</span> <span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
        data <span class="token operator">:</span> <span class="token string">&quot;3.异步&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> val<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1.异步</span>
        <span class="token comment">//2.异步</span>
        <span class="token comment">//3.异步</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//上面使用for循环取数据太麻烦,执行多个异步怎么拿到他们各自的数据方便呢?使用spread方法即可</span>
axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                url <span class="token operator">:</span> <span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
                data <span class="token operator">:</span> <span class="token string">&quot;1.异步&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                url <span class="token operator">:</span> <span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
                data <span class="token operator">:</span> <span class="token string">&quot;2.异步&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                url <span class="token operator">:</span> <span class="token string">&quot;https://cdn.liyanhui.com/data.json&quot;</span><span class="token punctuation">,</span>
                data <span class="token operator">:</span> <span class="token string">&quot;3.异步&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res1<span class="token punctuation">,</span>res2<span class="token punctuation">,</span>res3</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">.</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2<span class="token punctuation">.</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res3<span class="token punctuation">.</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="axios实例化和拦截"><a href="#axios实例化和拦截" class="header-anchor">#</a> axios实例化和拦截</h3> <h4 id="全局配置"><a href="#全局配置" class="header-anchor">#</a> 全局配置</h4> <ul><li><p>我们使用的异步网址大概率很长一段是重复的,我们就可以抽离出来设置</p></li> <li><p><code>axios.defaults.baseURL = &quot;https://cdn.liyanhui.com&quot;;</code>,它会自动和我们axios的url属性拼接到一起</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&quot;https://cdn.liyanhui.com&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//注释掉配置就会报错</span>
<span class="token comment">//Failed to load resource: the server responded with a status of 404 (Not Found)</span>
axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url <span class="token operator">:</span> <span class="token string">&quot;/data.json&quot;</span><span class="token punctuation">,</span>
        data <span class="token operator">:</span> <span class="token string">&quot;1.异步&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url <span class="token operator">:</span> <span class="token string">&quot;/data.json&quot;</span><span class="token punctuation">,</span>
        data <span class="token operator">:</span> <span class="token string">&quot;2.异步&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url <span class="token operator">:</span> <span class="token string">&quot;/data.json&quot;</span><span class="token punctuation">,</span>
        data <span class="token operator">:</span> <span class="token string">&quot;3.异步&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res1<span class="token punctuation">,</span>res2<span class="token punctuation">,</span>res3</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">.</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2<span class="token punctuation">.</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res3<span class="token punctuation">.</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="实例化"><a href="#实例化" class="header-anchor">#</a> 实例化</h4> <ul><li><p>实例化就是new一个对象,语法是<code>axios.create()</code>,好处是各个对象相对独立不受影响,可以给每个对象不同的配置,比如配置<code>defaults.baseURL</code></p></li> <li><p>甚至<code>create()</code>方法内部都可以直接传一些配置.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//创建对象再配置</span>
<span class="token keyword">const</span> myAxios <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myAxios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&quot;https://cdn.liyanhui.com&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//创建对象方法中配置</span>
<span class="token keyword">const</span> myAxios <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseURL <span class="token operator">:</span> <span class="token string">&quot;https://cdn.liyanhui.com&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method <span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    url <span class="token operator">:</span> <span class="token string">&quot;/data.json&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="拦截"><a href="#拦截" class="header-anchor">#</a> 拦截</h4> <ul><li><p>所为拦截操作就是在异步操作获取数据前的一些操作</p></li> <li><p>拦截操作的代码必须按顺序写在异步代码头顶.</p></li> <li><p>比如修改配置,loading,判断验证跳转,比如没登录就跳转到注册页面</p></li> <li><p>分为两种,<strong>请求拦截</strong>和<strong>响应拦截</strong></p></li> <li><p>请求拦截是在还没获取数据时拦截,修改配置一类的<code>axios.interceptors.request.use</code>,匿名函数中可以拿到config配置对象</p></li> <li><p>而相应拦截已经获取到数据,可以对数据进行操作再返回<code>axios.interceptors.response.use</code>,匿名函数中可以拿到response对象,可以操作数据</p> <div class="language-js extra-class"><pre class="language-js"><code>myAxios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;请求拦截&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这时就会拦截下面的异步请求</span>
    config<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">&quot;data2.json&quot;</span><span class="token punctuation">;</span><span class="token comment">//修改配置,url,因为是错误的url所以报错GET https://cdn.liyanhui.com/data2.json 404</span>
    config<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token comment">//修改超时配置,0.05s就超时,报错Uncaught (in promise) Error: timeout of 5ms exceeded</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span><span class="token comment">//因为本质是promise,所以只要返回自己,就可以继续调用</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>myAxios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在这里可以对这个data做各种各样的修改再返回给异步的结果</span>
    <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">myAxios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method <span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    url <span class="token operator">:</span> <span class="token string">&quot;/data.json&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//说白了请求拦截等于是在这里拦截</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//响应拦截是在这里</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="mock拦截axios请求"><a href="#mock拦截axios请求" class="header-anchor">#</a> Mock拦截axios请求</h3> <ul><li><p>我们写一个异步请求,假如后端的接口还没写好,所以访问不到网址或拿不到数据</p></li> <li><p>我们就把异步请求拦截使用mock填充我们想要的数据</p></li> <li><p>只需要使用Mock.mock,第一个参数填要拦截的url,第二个参数写我们要填充的数据格式即可.这样不论这个url能不能拿到数据我们都可以拦截并填充数据.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://mockjs.com/dist/mock.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
            <span class="token comment">//上下两个url必须一致,这样将来只需要删掉mock代码即可</span>
            axios<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">'method'</span> <span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
                <span class="token string">'url'</span> <span class="token operator">:</span> <span class="token string">'http://cdn.liyanhui.com/data.json'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">'http://cdn.liyanhui.com/data.json'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                <span class="token string">&quot;list|5-10&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;id|+1&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;@cname&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;@email&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;gender&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;@boolean&quot;</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;price&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;@integer&quot;</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/qianduan/jquery/米斯特吴jquery.html" class="prev">
        米斯特吴jquery
      </a></span> <span class="next"><a href="/qianduan/lyh/李炎恢vue工具篇.html">
        vue工具篇教程学习笔记
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b56b5bda.js" defer></script><script src="/assets/js/2.22c5cd06.js" defer></script><script src="/assets/js/55.ba664490.js" defer></script>
  </body>
</html>
